# Documentation

The Comet LLM Evaluation documentation has three main components:

1. Documentation website with user guides and tutorials
2. Python SDK reference documentation
3. API reference documentation

## Python SDK

The Python SDK reference documentation is built using Sphinx.

### Setup
In order to generate the reference documentation, you will need use Python 3.10 or later.

You can create the required environment using:

```python
conda create --name py312_docs_opik python=3.12
conda activate py312_docs_opik

cd python-sdk-docs
pip install -r requirements.txt
```

### Development

When building the Sphinx docs, there are two main components:

1. The source code available at `../../../sdks/python` - This is where all the docstrings are defined
2. The Sphinx files available at `./source`

In order to view the Sphinx docs, you can run the following commands:

```
make dev
```

The `python-sdk-docs-dev` command will rebuild the sphinx docs on any changes in the source repo and will also serve the docs on `http://localhost:8000`. If you make any changes to the SDK source code, you will need to run this command again.

### Publishing the docs

To deploy the docs, you can run the following command:

```
pip install -e ../../../sdks/python/
make build

ssh root@146.190.72.83 'cd /var/www/html && rm -rf sdk-reference-docs'
scp -r build/html* root@146.190.72.83:/var/www/html/sdk-reference-docs
```

**Note:** The `generate-python-sdk-documentation` command will use the opik SDK version you have installed. If you want to use a specific version of the SDK, make sure it is installed and then run the command.

## API reference documentation

The API reference documentation is autogenerated based on OpenAPI specs and served directly from the backend. This ensures the API documentation is always up to date.


## Documentation

The main documentation containing our guides and tutorials are build using Docusaurus.

### Setup

In order to run the documentation locally, you will need to install Node.js. For this we will use `nvm` to install the correct version of Node.js.

```
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
```

We will then install the latest version of Node.js.

```
nvm install --lts
nvm use --lts
```

You can install the dependencies by running the following command:

```
cd documentation
npm install
```

### Running the documentation locally
You can run the documentation locally by running the following command:

```
cd documentation
npm run dev
```

**Note:** When running `npm run dev`, cookbooks are rebuild each time a change is saved. For this you will need to have a Python environment running with `jupyter` installed. If you don't have it installed, you can use the command `npm run start` instead to only start docusaurus.

### Publishing the docs

You can publish the docs to the dev server by running the following commands:
```
# Build the files
npm run build

# Remove the existing files
ssh root@146.190.72.83 'cd /var/www/html && rm -rf 404.html index.html sitemap.xml assets category evaluation img monitoring quickstart self-host tracing cookbook'

# Push the files
scp -r build/* root@146.190.72.83:/var/www/html/
```
